{
  "submodules": ["ext/libav", "ext/vmir", "ext/rtmpdump", "ext/gumbo-parser",
                 "ext/libyuv"],
  "targets": {
    "android": {
      "buildenv": "docker:andoma/movian-android:26",
      "builddeps": [
        "git-core",
        "build-essential",
        "autoconf",
        "bison",
        "flex",
        "libelf-dev",
        "libtool",
        "pkg-config",
        "texinfo",
        "libncurses5-dev",
        "libz-dev",
        "python-dev",
        "libssl-dev",
        "libgmp3-dev",
        "ccache",
        "zip",
        "curl",
        "wget",
        "yasm"
      ],
      "buildcmd": [
        "./configure.android --release --version=${VERSION} --ccache --downloadcache=${WORKDIR}/downloadcache --kind=api16_armv7",
        "make -j${PARALLEL} apk",
        "./configure.android --release --version=${VERSION} --ccache --downloadcache=${WORKDIR}/downloadcache --kind=api16_x86",
        "make -j${PARALLEL} apk",
      ]
    },

    "ps3": {
      "buildenv": "xenial-amd64",
      "builddeps": [
        "git-core",
        "build-essential",
        "autoconf",
        "bison",
        "flex",
        "libelf-dev",
        "libtool",
        "pkg-config",
        "texinfo",
        "libncurses5-dev",
        "libz-dev",
        "python-dev",
        "libssl-dev",
        "libgmp3-dev",
        "ccache",
        "zip",
        "curl",
        "wget"
      ],
      "buildcmd": "./Autobuild.sh -t ${TARGET} -j ${PARALLEL} -w ${WORKDIR} -v ${VERSION}"
    },

    "rpi": {
      "buildenv": "trusty-amd64",
      "builddeps": [
        "git-core",
        "build-essential",
        "autoconf",
        "bison",
        "flex",
        "libelf-dev",
        "libtool",
        "pkg-config",
        "texinfo",
        "libncurses5-dev",
        "libz-dev",
        "python-dev",
        "libssl-dev",
        "libgmp3-dev",
        "ccache",
        "zip",
        "curl",
        "wget",
        "squashfs-tools"
      ],
      "buildcmd": "./Autobuild.sh -t ${TARGET} -j ${PARALLEL} -w ${WORKDIR} -v ${VERSION}"
    },

    "osx": {
      "buildenv": "osx",
      "homebrew": {
        "formulae": ["yasm", "ccache"]
      },
      "artifacts": [
        "build.osx/Movian.zip",
        "build.osx/movian.bin"
      ],
      "buildcmd": [
        "./configure.osx --release --version=${VERSION} --cleanbuild --ccache",
        "make -j ${PARALLEL} dist",
      ]
    },

    "snap-x86_64": {
      "buildenv": "docker:ubuntu:16.04",
      "builddeps": [
        "ccache",
        "git",
        "build-essential",
        "pkg-config",
        "libfreetype6-dev",
        "libfontconfig1-dev",
        "libx11-dev",
        "libxext-dev",
        "libgl1-mesa-dev",
        "libpulse-dev",
        "libssl-dev",
        "libsqlite3-dev",
        "libxss-dev",
        "yasm",
        "curl",
        "squashfs-tools"
      ],

      "buildcmd": [
        "./configure --ccache --disable-avahi --disable-vdpau",
        "make -j${PARALLEL} snap"
      ],
      "artifacts": [
        "build.linux/movian.snap"
      ],
    }
  }
}

